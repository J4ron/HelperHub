@page "/raw"
@using System.IO
@using RFE.Components.Layout
@layout ClearLayout
@rendermode InteractiveServer
@inject NavigationManager NavigationManager

<body>
<pre>@(FileContent ?? "Loading...")</pre>
</body>

<style>
    body {
        margin: 0;
        padding: 0;
        background-color: #1c1b22;
        color: #FBFBFB;
        font-family: 'Courier New', Courier, monospace;
        font-size: 16px;
        font-weight: 300;
    }

    pre {
        white-space: pre-wrap; 
        padding: 1rem;
    }
</style>

@code {
    private string? FileContent = null;

    protected override void OnInitialized()
    {
        var uri = new Uri(NavigationManager.Uri);
        var query = System.Web.HttpUtility.ParseQueryString(uri.Query);
        var filePath = query["file"];

        if (!string.IsNullOrEmpty(filePath) && File.Exists(filePath))
        {
            try
            {
                FileContent = File.ReadAllText(filePath);
            }
            catch (Exception ex)
            {
                FileContent = $"Error loading file: {ex.Message}";
            }
        }
        else
        {
            FileContent = "Invalid or missing file path.";
        }
    }
}